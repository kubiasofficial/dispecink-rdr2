<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <style>
        body { background-color: #1e1c1a; color: #d2c1ae; font-family: "Courier New", monospace; margin: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh; }
        .log-book { background-color: #2d2a27; border: 1px solid #b09060; padding: 40px; width: 700px; box-shadow: 0 0 30px rgba(0,0,0,0.7); text-align: center; }
        h1 { color: #b09060; letter-spacing: 4px; text-transform: uppercase; margin-bottom: 20px; }
        .hidden { display: none; }
        
        /* Styl tlaƒç√≠tek a seznam≈Ø dle image_1fb9e8.png */
        .option-box { border: 1px solid #4d453d; padding: 15px; margin: 10px 0; cursor: pointer; text-align: left; text-transform: uppercase; transition: 0.2s; }
        .option-box:hover { border-color: #b09060; background: #333; }
        .option-box.selected { background-color: #b09060; color: #1a1816; font-weight: bold; }
        
        /* Historie dle image_1fbdec.png */
        input[type="number"] { width: 100%; padding: 15px; background: #141210; color: #d2c1ae; border: 1px solid #4d453d; font-size: 2rem; text-align: center; margin: 20px 0; }
        
        .gold-btn { background: #b09060; color: #1a1816; border: none; padding: 15px 30px; font-weight: bold; cursor: pointer; text-transform: uppercase; margin-top: 20px; font-family: "Courier New"; }

        /* Protokol j√≠zdy dle image_1f3ea1.png */
        .tt-row { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #333; }
        .tag { background: #b0906033; color: #b09060; padding: 2px 5px; font-size: 0.7rem; margin-left: 10px; border: 1px solid #b09060; }
    </style>
</head>
<body>

<div class="log-book">
    <h1>CONTINENTAL RAIL COMPANY</h1>

    <div id="step1">
        <p style="font-size: 0.7rem; color: #a08050;">SEZNAM STROJV≈ÆDC≈Æ VE SLU≈ΩBƒö:</p>
        <div class="option-box" onclick="sel(this, 'name', 'ELIZABETH BROWN')">¬ß ELIZABETH BROWN</div>
        <div class="option-box" onclick="sel(this, 'name', 'JOSHUE THORNE')">¬ß JOSHUE THORNE</div>
        <div class="option-box" onclick="sel(this, 'name', 'HENRY BROWN')">¬ß HENRY BROWN</div>
        <div class="option-box" onclick="sel(this, 'name', 'NICHOLAS CARTER')">¬ß NICHOLAS CARTER</div>
        <button class="gold-btn" onclick="go(2)">POKRAƒåOVAT</button>
    </div>

    <div id="step2" class="hidden">
        <p style="font-size: 0.7rem; color: #a08050;">POƒåET KOL P≈òED ZAƒå√ÅTKEM SMƒöNY (HISTORIE):</p>
        <input type="number" id="hist" value="0">
        <p style="font-size: 0.7rem; color: #a08050;">VYBERTE TYP SLU≈ΩBY:</p>
        <div class="option-box" onclick="sel(this, 'shift', 'RANN√ç')">¬ß RANN√ç (05:00 - 15:00)</div>
        <div class="option-box" onclick="sel(this, 'shift', 'ODPOLEDN√ç')">¬ß ODPOLEDN√ç (15:00 - 22:00)</div>
        <div class="option-box" onclick="sel(this, 'shift', 'NOƒåN√ç')">¬ß NOƒåN√ç (22:00 - 05:00)</div>
        <button class="gold-btn" onclick="gen()">POKRAƒåOVAT K PL√ÅNU</button>
    </div>

    <div id="step3" class="hidden">
        <p style="font-size: 0.7rem; color: #a08050;">[ PROS√çM OTEV≈òI SI J√çZDN√ç ≈ò√ÅDY A ZKONTROLUJ SI SVOU SMƒöNU ]</p>
        <div id="rounds-btns" style="display:flex; justify-content:center; gap:10px; margin:20px 0;"></div>
        <div id="preview" style="background:#141210; padding:20px; text-align:left; min-height:100px;"></div>
        <div style="display:flex; justify-content:space-between; align-items:center; margin-top:20px;">
            <p>KONEC SMƒöNY: <span id="endTime" style="color:#b09060; font-weight:bold;">--:--</span></p>
            <button class="gold-btn" onclick="start()">SOUHLAS√çM</button>
        </div>
    </div>
</div>

<script>
    let data = { name: "", hist: 0, shift: "" };
    const lines = [
        { id: 1, n: "LINIE I. - HLAVN√ç OKRUH", t: 5, s: ["Saint Denis", "Emerald", "Valentine", "Flatneck", "Riggs", "Wallace", "Bacchus", "Annesburg", "Van Horn", "Saint Denis"], l: "Saint Denis", u: "Wallace" },
        { id: 2, n: "LINIE II. - Z√ÅPADN√ç SPOJKA", t: 6, s: ["Saint Denis", "Rhodes", "Flatneck", "Blackwater", "MacFarlane's Ranch", "Montana", "Flatneck", "Valentine", "Saint Denis"], l: "Saint Denis", u: "MacFarlane's Ranch" },
        { id: 3, n: "LINIE III. - SEVERN√ç SPOJ", t: 5, s: ["Saint Denis", "Van Horn", "Annesburg", "Bacchus Station", "Wallace Station", "Riggs Station", "Flatneck Station", "Rhodes"], l: "Saint Denis", u: "Wallace Station" },
        { id: 4, n: "LINIE IV. - JI≈ΩN√ç EKSPRES", t: 7, s: ["Saint Denis", "Rhodes", "Flatneck", "Riggs", "Blackwater", "Riggs", "Flatneck", "Saint Denis"], l: "Saint Denis", u: "Benedict Point" }
    ];
    let schedule = [];

    function sel(el, key, val) {
        el.parentElement.querySelectorAll('.option-box').forEach(x => x.classList.remove('selected'));
        el.classList.add('selected');
        data[key] = val;
    }

    function go(s) {
        document.getElementById('step1').classList.add('hidden');
        document.getElementById('step2').classList.remove('hidden');
    }

    function gen() {
        data.hist = document.getElementById('hist').value;
        document.getElementById('step2').classList.add('hidden');
        document.getElementById('step3').classList.remove('hidden');
        
        let now = new Date();
        let curr = new Date(now);
        
        for(let i=0; i<4; i++) {
            let line = lines[i];
            let round = { name: line.n, stops: [] };
            line.s.forEach((st, idx) => {
                let cargo = (st === line.l || st === line.u);
                if(idx > 0) curr.setMinutes(curr.getMinutes() + line.t + (cargo ? 3 : 0));
                round.stops.push({ n: st, t: curr.getHours() + ":" + curr.getMinutes().toString().padStart(2,'0'), c: st === line.l ? 'NAKL√ÅDKA' : (st === line.u ? 'VYKL√ÅDKA' : '') });
            });
            schedule.push(round);
            // Pauza v Saint Denis po 2. a 3. kole (5 min)
            if(i === 1 || i === 2) curr.setMinutes(curr.getMinutes() + 5);
        }
        
        document.getElementById('endTime').innerText = curr.getHours() + ":" + curr.getMinutes().toString().padStart(2,'0');
        let btns = "";
        schedule.forEach((r, i) => btns += `<button class="gold-btn" style="padding:10px" onclick="showR(${i})">KOLO ${i+1}</button>`);
        document.getElementById('rounds-btns').innerHTML = btns;
    }

    function showR(i) {
        let r = schedule[i];
        let html = `<p style="color:#b09060; font-weight:bold; border-bottom:1px solid #444;">${r.name}</p>`;
        r.stops.forEach(s => html += `<div class="tt-row"><span>${s.n} ${s.c ? `<span class="tag">${s.c}</span>`:''}</span><span>${s.t}</span></div>`);
        document.getElementById('preview').innerHTML = html;
    }

    async function start() {
        await fetch("https://discord.com/api/webhooks/1462379181290553378/7szxSP1bgAiR1diwDixyPPrXxklYWVGdLn3xZy8czqxGbqda9wtryXNV_zqJXL3PHGKO", {
            method: 'POST', headers: {'Content-Type':'application/json'},
            body: JSON.stringify({content: `üöÇ **${data.name}** zah√°jil smƒõnu (**${data.shift}**). Historie: ${data.hist} kol.`})
        });
        alert("Smƒõna odstartov√°na!");
    }
</script>
</body>
</html>
